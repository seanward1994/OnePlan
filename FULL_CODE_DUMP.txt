# OnePlanMegaAlpha — full source dump (2025-09-30T03:35:45Z)

## File list
.github/workflows/android-ci.yml
.github/workflows/oneplan-all.yml.
.github/workflows/self_heal_and_dump.yml
.gitignore
app/build.gradle.kts
app/src/main/AndroidManifest.xml
app/src/main/java/com/oneplan/app/MainActivity.kt
app/src/main/res/drawable/ic_launcher_foreground.xml
app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml
app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml
app/src/main/res/mipmap-hdpi/ic_launcher.png
app/src/main/res/mipmap-hdpi/ic_launcher_round.png
app/src/main/res/mipmap-mdpi/ic_launcher.png
app/src/main/res/mipmap-mdpi/ic_launcher_round.png
app/src/main/res/mipmap-xhdpi/ic_launcher.png
app/src/main/res/mipmap-xhdpi/ic_launcher_round.png
app/src/main/res/mipmap-xxhdpi/ic_launcher.png
app/src/main/res/mipmap-xxhdpi/ic_launcher_round.png
app/src/main/res/mipmap-xxxhdpi/ic_launcher.png
app/src/main/res/mipmap-xxxhdpi/ic_launcher_round.png
app/src/main/res/values/colors.xml
app/src/main/res/values/ic_launcher_background.xml
app/src/main/res/values/themes.xml
build.gradle.kts
gradle.properties
gradle/wrapper/gradle-wrapper.jar
gradle/wrapper/gradle-wrapper.properties
gradlew
gradlew.bat
oneplan_all_in_one.sh
oneplan_bootstrap.sh
oneplan_megaalpha_nuke.sh
settings.gradle.kts

## Sources

-----8<----- FILE: .github/workflows/android-ci.yml -----8<-----

name: OnePlanAndroid — CI
on:
  push:
    branches: [ main, refactor/megaalpha ]
  pull_request:
    branches: [ main, refactor/megaalpha ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with: { fetch-depth: 1 }

      - name: Setup Java
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: '17'

      - name: Setup Gradle
        uses: gradle/actions/setup-gradle@v3

      # Bump versionCode (commit back with [skip ci] to avoid loops)
      - name: Bump versionCode
        run: |
          vc=$(cat .oneplan_versioncode 2>/dev/null || echo 1)
          vc=$((vc+1))
          echo "$vc" > .oneplan_versioncode
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add .oneplan_versioncode
          git commit -m "chore(ci): bump versionCode to $vc [skip ci]" || echo "No changes"
          git push || true

      - name: Assemble debug APK
        run: gradle --no-daemon --stacktrace :app:assembleDebug

      - name: Upload APK(s)
        uses: actions/upload-artifact@v4
        with:
          name: oneplanmegaalpha-debug-apks
          path: app/build/outputs/apk/debug/*.apk
          if-no-files-found: error

      - name: Generate FULL_CODE_DUMP.txt (root)
        run: |
          OUT="FULL_CODE_DUMP.txt"
          echo "# OnePlanMegaAlpha — full source dump ($(date -u +%Y-%m-%dT%H:%M:%SZ))" > "$OUT"
          echo >> "$OUT"
          echo "## File list" >> "$OUT"
          git ls-files | sort >> "$OUT"
          echo >> "$OUT"
          echo "## Sources" >> "$OUT"
          git ls-files \
            ':!**/*.png' ':!**/*.jpg' ':!**/*.jpeg' ':!**/*.webp' ':!**/*.gif' \
            ':!**/*.keystore' ':!**/*.jks' \
            | while read -r f; do
              echo -e "\n\n-----8<----- FILE: $f -----8<-----\n" >> "$OUT"
              sed -n '1,5000p' "$f" >> "$OUT" || true
            done

      - name: Commit FULL_CODE_DUMP.txt to repo (skip CI)
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add FULL_CODE_DUMP.txt
          git commit -m "chore(ci): refresh FULL_CODE_DUMP [skip ci]" || echo "No changes"
          git push || true

      - name: Upload FULL_CODE_DUMP artifact
        uses: actions/upload-artifact@v4
        with:
          name: FULL_CODE_DUMP
          path: FULL_CODE_DUMP.txt

-----8<----- FILE: .github/workflows/oneplan-all.yml. -----8<-----


-----8<----- FILE: .github/workflows/self_heal_and_dump.yml -----8<-----


-----8<----- FILE: .gitignore -----8<-----


-----8<----- FILE: app/build.gradle.kts -----8<-----

plugins {
    id("com.android.application") version "8.5.2"
    kotlin("android") version "1.9.24"
    id("com.google.devtools.ksp") version "1.9.24-1.0.20"
}

android {
    namespace = "com.oneplan.megaalpha"
    compileSdk = 34

    defaultConfig {
        applicationId = "com.oneplan.megaalpha"
        minSdk = 24
        targetSdk = 34
        val vcFile = file("${rootDir}/.oneplan_versioncode")
        val vcStr = if (vcFile.exists()) vcFile.readText().trim() else "1"
        versionCode = vcStr.toInt()
        versionName = "0.4.$versionCode"
        vectorDrawables { useSupportLibrary = true }
    }

    buildTypes {
        release {
            isMinifyEnabled = false
            proguardFiles(
                getDefaultProguardFile("proguard-android-optimize.txt"),
                "proguard-rules.pro"
            )
        }
        debug {
            isDebuggable = true
        }
    }

    buildFeatures { compose = true }
    composeOptions { kotlinCompilerExtensionVersion = "1.5.12" }

    packaging { resources { excludes += "/META-INF/{AL2.0,LGPL2.1}" } }

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_17
        targetCompatibility = JavaVersion.VERSION_17
    }
    kotlinOptions { jvmTarget = "17" }
}

dependencies {
    val composeBom = platform("androidx.compose:compose-bom:2024.08.00")
    implementation(composeBom)
    androidTestImplementation(composeBom)

    // Core
    implementation("androidx.core:core-ktx:1.13.1")
    implementation("androidx.activity:activity-compose:1.9.2")
    implementation("androidx.lifecycle:lifecycle-runtime-ktx:2.8.5")

    // Compose
    implementation("androidx.compose.ui:ui")
    implementation("androidx.compose.ui:ui-tooling-preview")
    implementation("androidx.compose.material3:material3")
    implementation("androidx.compose.material:material-icons-extended")
    debugImplementation("androidx.compose.ui:ui-tooling")
    debugImplementation("androidx.compose.ui:ui-test-manifest")

    // Navigation Compose
    implementation("androidx.navigation:navigation-compose:2.8.2")

    // DataStore
    implementation("androidx.datastore:datastore-preferences:1.1.1")

    // Room (KSP)
    implementation("androidx.room:room-runtime:2.6.1")
    ksp("androidx.room:room-compiler:2.6.1")
    implementation("androidx.room:room-ktx:2.6.1")

    // Tests
    androidTestImplementation("androidx.test.ext:junit:1.2.1")
    androidTestImplementation("androidx.test.espresso:espresso-core:3.6.1")
    androidTestImplementation("androidx.compose.ui:ui-test-junit4")
}

-----8<----- FILE: app/src/main/AndroidManifest.xml -----8<-----

<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    <application
        android:label="OnePlanMegaAlpha (Alpha)"
        android:icon="@mipmap/ic_launcher"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:theme="@style/Theme.OnePlan">
        <activity
            android:name="com.oneplan.megaalpha.MainActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest>

-----8<----- FILE: app/src/main/java/com/oneplan/app/MainActivity.kt -----8<-----


-----8<----- FILE: app/src/main/res/drawable/ic_launcher_foreground.xml -----8<-----

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="108dp" android:height="108dp"
    android:viewportWidth="108" android:viewportHeight="108">
    <path android:fillColor="#2F80ED" android:pathData="M0,0h108v108h-108z"/>
    <path android:fillColor="#FFFFFF" android:pathData="M22,36h64v10h-64z"/>
    <path android:fillColor="#FFFFFF" android:pathData="M22,58h44v10h-44z"/>
</vector>

-----8<----- FILE: app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml -----8<-----

<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@android:color/white"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
</adaptive-icon>

-----8<----- FILE: app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml -----8<-----

<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@android:color/white"/>
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
</adaptive-icon>

-----8<----- FILE: app/src/main/res/values/colors.xml -----8<-----

<resources>
    <color name="oneplan_primary">#2F80ED</color>
</resources>

-----8<----- FILE: app/src/main/res/values/ic_launcher_background.xml -----8<-----


-----8<----- FILE: app/src/main/res/values/themes.xml -----8<-----

<resources>
    <style name="Theme.OnePlan" parent="Theme.Material3.DayNight.NoActionBar"/>
</resources>

-----8<----- FILE: build.gradle.kts -----8<-----

// Root intentionally minimal — avoid duplicate `plugins {}` pitfalls
allprojects {
    // all repos configured in settings.gradle.kts (dependencyResolutionManagement)
}

-----8<----- FILE: gradle.properties -----8<-----

org.gradle.jvmargs=-Xmx2g -Dfile.encoding=UTF-8
android.useAndroidX=true
kotlin.code.style=official

-----8<----- FILE: gradle/wrapper/gradle-wrapper.jar -----8<-----


-----8<----- FILE: gradle/wrapper/gradle-wrapper.properties -----8<-----


-----8<----- FILE: gradlew -----8<-----


-----8<----- FILE: gradlew.bat -----8<-----


-----8<----- FILE: oneplan_all_in_one.sh -----8<-----


-----8<----- FILE: oneplan_bootstrap.sh -----8<-----


-----8<----- FILE: oneplan_megaalpha_nuke.sh -----8<-----


-----8<----- FILE: settings.gradle.kts -----8<-----

pluginManagement {
    repositories {
        google()
        mavenCentral()
        gradlePluginPortal()
    }
}
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
    }
}
rootProject.name = "OnePlanAndroid"
include(":app")
